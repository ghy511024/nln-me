<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>jsp jstl 语法模版引擎</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="/static/css/common.css"/>
<script type="text/javascript" src="http://static.ws.kukuplay.com/common/lib/jquery/v1.9.2/jquery-1.9.2.js"></script>
<script src="http://cdn.bootcss.com/highlight.js/8.5/highlight.min.js"></script>

<script src="//cdn.bootcss.com/three.js/r81/three.min.js"></script>
<script type="text/javascript" src="/static/js/lib/zcreate.min.js"></script>
<script type="text/javascript">
    var Wiki = (function () {
        var wiki = {
            init: function () {
                this.layout()
                this.initEvent();
            }, layout: function () {
                hljs.configure({tabReplace: '    '});
                hljs.initHighlightingOnLoad()
            }, initEvent: function () {
            }, load: function (link) {
            }
        };
        var ret = {
            init: function () {
                wiki.init();
            }
        }
        return ret;
    })()
    $(function () {
        Wiki.init();
    })
</script>

    </head>
    <body>
        <style>.header{height:42px;position:relative;top:0;background:#000}.header .header-inner{width:960px;height:100%;color:#fff;overflow:hidden;position:relative;left:-28px;margin:0 auto;line-height:42px}.header .header-inner a{color:#fff;text-decoration:none}.header .header-inner ul{margin-left:130px}.header .header-inner ul li{height:100%;float:left;margin-right:25px}.header .header-inner ul li.active{background:rgba(132,132,132,.34)}</style>
<div class="header">
    <div class="header-inner">
        <style>.logo{width:150px;height:42px;position:absolute;left:-28px}.logo #geeklogo{position:absolute;width:150px;height:42px}</style>
<div class="logo">
    <div id="geeklogo"></div>
</div>
<script type="text/javascript">!function(){function e(){H=!0}function a(){H=!1}function t(){var e;p=Math.max(0,Math.min(70,H?p+.5:p-.5)),T=o(p,0,1,240),T>.35&&(e=(T-.35)/.65,e=Math.max(0,(T-.97)/.03),i.material.opacity=1-e,r.material.opacity=E.material.opacity=e,E.scale.x=E.scale.y=.9+.1*e),d.render(c,s)}function n(){i.rotation.x+=u+T,t(),requestAnimationFrame(n)}function o(e,a,t,n){return(e/=n/2)<1?t/2*e*e+a:t/2*((e-=2)*e*e+2)+a}var i,r,E,s,c,d,l="#000",M=(document.body,document.getElementById("geeklogo")),R=150,h=42,m=30,w=5.6,u=.035,T=0,p=0,H=!1,y=2*Math.PI,f=new THREE.Group;s=new THREE.PerspectiveCamera(65,R/h,1,1e4),s.position.z=24,c=new THREE.Scene,c.add(f),i=new THREE.Mesh(new THREE.TubeGeometry(new(THREE.Curve.create(function(){},function(e){var a,t,n=m*Math.sin(y*e),o=w*Math.cos(3*y*e);return t=e%.25/.25,t=e%.25-(2*(1-t)*t*-.0185+t*t*.25),(0==Math.floor(e/.25)||2==Math.floor(e/.25))&&(t*=-1),a=w*Math.sin(2*y*(e-t)),new THREE.Vector3(n,o,a)})),200,1.1,2,!0),new THREE.MeshBasicMaterial({})),f.add(i),r=new THREE.Mesh(new THREE.PlaneGeometry(50,15,1),new THREE.MeshBasicMaterial({color:l,opacity:0,transparent:!0})),r.position.x=m+1,r.rotation.y=Math.PI/2,f.add(r),E=new THREE.Mesh(new THREE.RingGeometry(4.3,5.55,32),new THREE.MeshBasicMaterial({color:16777215,opacity:0,transparent:!0})),E.position.x=m+1.1,E.rotation.y=Math.PI/2,f.add(E),function(){var e,a;for(a=0;10>a;a++)e=new THREE.Mesh(new THREE.PlaneGeometry(2*m+1,3*w,1),new THREE.MeshBasicMaterial({color:l,transparent:!0,opacity:.13})),e.position.z=-2.5+.5*a,f.add(e)}(),d=new THREE.WebGLRenderer({antialias:!0,alpha:!0}),d.setPixelRatio(window.devicePixelRatio),d.setSize(R,h),M.appendChild(d.domElement),M.addEventListener("mouseenter",e,!1),M.addEventListener("mouseleave",a,!1),n()}();</script>
        <ul class="clear font-new">
            <li>
                <a href="##">cooladmin</a>    
            </li>
            <li>
                <a href="##">zlib</a>    
            </li>
        </ul>
    </div>
</div>
        <div  class="banner">
            <div class="banner-header">
                <p>正则对工作中各方面的提升都是非常大的，例如阅读一个未知框架的配置文件</p>
            </div>
            <div class="banner-title">
                <p>正则=校验+替换+提取</p>
                <h1>进击的正则，基础提高篇</h1>
            </div>
            <style>.canvas-wrap{width:100%;height:100%;position:absolute;opacity:.7}.canvas-wrap #canvasBase{position:absolute;top:0;left:0;background:#000;width:100%;height:100%}.canvas-wrap #canvasOverlay{position:absolute;top:0;left:0;mix-blend-mode:hard-light;width:100%;height:100%}</style>
<div class="canvas-wrap">
    <canvas id="canvasBase"></canvas>
    <canvas id="canvasOverlay"></canvas>
</div>
<script type="text/javascript">var wrap_w=window.innerWidth,wrap_h=350;!function(t){function e(t,e,i){this.x=t,this.y=e,this.z=i}function i(t){return t*t*t*(t*(6*t-15)+10)}function a(t,e,i){return(1-i)*t+i*e}var r=t.noise={};e.prototype.dot2=function(t,e){return this.x*t+this.y*e},e.prototype.dot3=function(t,e,i){return this.x*t+this.y*e+this.z*i};var s=[new e(1,1,0),new e(-1,1,0),new e(1,-1,0),new e(-1,-1,0),new e(1,0,1),new e(-1,0,1),new e(1,0,-1),new e(-1,0,-1),new e(0,1,1),new e(0,-1,1),new e(0,1,-1),new e(0,-1,-1)],n=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],o=new Array(512),h=new Array(512);r.seed=function(t){t>0&&1>t&&(t*=65536),t=Math.floor(t),256>t&&(t|=t<<8);for(var e=0;256>e;e++){var i;i=1&e?n[e]^255&t:n[e]^t>>8&255,o[e]=o[e+256]=i,h[e]=h[e+256]=s[i%12]}},r.seed(0);var c=.5*(Math.sqrt(3)-1),l=(3-Math.sqrt(3))/6,p=1/3,d=1/6;r.simplex2=function(t,e){var i,a,r,s,n,p=(t+e)*c,d=Math.floor(t+p),u=Math.floor(e+p),v=(d+u)*l,g=t-d+v,f=e-u+v;g>f?(s=1,n=0):(s=0,n=1);var _=g-s+l,m=f-n+l,w=g-1+2*l,y=f-1+2*l;d&=255,u&=255;var M=h[d+o[u]],C=h[d+s+o[u+n]],x=h[d+1+o[u+1]],S=.5-g*g-f*f;0>S?i=0:(S*=S,i=S*S*M.dot2(g,f));var k=.5-_*_-m*m;0>k?a=0:(k*=k,a=k*k*C.dot2(_,m));var j=.5-w*w-y*y;return 0>j?r=0:(j*=j,r=j*j*x.dot2(w,y)),70*(i+a+r)},r.simplex3=function(t,e,i){var a,r,s,n,c,l,u,v,g,f,_=(t+e+i)*p,m=Math.floor(t+_),w=Math.floor(e+_),y=Math.floor(i+_),M=(m+w+y)*d,C=t-m+M,x=e-w+M,S=i-y+M;C>=x?x>=S?(c=1,l=0,u=0,v=1,g=1,f=0):C>=S?(c=1,l=0,u=0,v=1,g=0,f=1):(c=0,l=0,u=1,v=1,g=0,f=1):S>x?(c=0,l=0,u=1,v=0,g=1,f=1):S>C?(c=0,l=1,u=0,v=0,g=1,f=1):(c=0,l=1,u=0,v=1,g=1,f=0);var k=C-c+d,j=x-l+d,P=S-u+d,b=C-v+2*d,A=x-g+2*d,R=S-f+2*d,I=C-1+3*d,L=x-1+3*d,E=S-1+3*d;m&=255,w&=255,y&=255;var z=h[m+o[w+o[y]]],B=h[m+c+o[w+l+o[y+u]]],F=h[m+v+o[w+g+o[y+f]]],G=h[m+1+o[w+1+o[y+1]]],T=.6-C*C-x*x-S*S;0>T?a=0:(T*=T,a=T*T*z.dot3(C,x,S));var H=.6-k*k-j*j-P*P;0>H?r=0:(H*=H,r=H*H*B.dot3(k,j,P));var X=.6-b*b-A*A-R*R;0>X?s=0:(X*=X,s=X*X*F.dot3(b,A,R));var O=.6-I*I-L*L-E*E;return 0>O?n=0:(O*=O,n=O*O*G.dot3(I,L,E)),32*(a+r+s+n)},r.perlin2=function(t,e){var r=Math.floor(t),s=Math.floor(e);t-=r,e-=s,r=255&r,s=255&s;var n=h[r+o[s]].dot2(t,e),c=h[r+o[s+1]].dot2(t,e-1),l=h[r+1+o[s]].dot2(t-1,e),p=h[r+1+o[s+1]].dot2(t-1,e-1),d=i(t);return a(a(n,l,d),a(c,p,d),i(e))},r.perlin3=function(t,e,r){var s=Math.floor(t),n=Math.floor(e),c=Math.floor(r);t-=s,e-=n,r-=c,s=255&s,n=255&n,c=255&c;var l=h[s+o[n+o[c]]].dot3(t,e,r),p=h[s+o[n+o[c+1]]].dot3(t,e,r-1),d=h[s+o[n+1+o[c]]].dot3(t,e-1,r),u=h[s+o[n+1+o[c+1]]].dot3(t,e-1,r-1),v=h[s+1+o[n+o[c]]].dot3(t-1,e,r),g=h[s+1+o[n+o[c+1]]].dot3(t-1,e,r-1),f=h[s+1+o[n+1+o[c]]].dot3(t-1,e-1,r),_=h[s+1+o[n+1+o[c+1]]].dot3(t-1,e-1,r-1),m=i(t),w=i(e),y=i(r);return a(a(a(l,v,m),a(p,g,m),y),a(a(d,f,m),a(u,_,m),y),w)}}(this);var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},clockmaker;!function(t){"use strict";var e=function(){function t(){}return t.highDPI=function(e,i,a){var r=t._getBackingRatio(e),s=Math.max(1,(window.devicePixelRatio||1)/r),n=e.canvas;return n.style,n.width=i*s,n.height=a*s,e.scaleX=e.scaleY=s,this},t._getBackingRatio=function(t){var e=t.canvas.getContext("2d");return e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||1},t}();t.StageHelper=e}(clockmaker||(clockmaker={}));var project;!function(t){"use strict";var e=function(t){function e(){t.call(this),this.time=0,this.MAX_LINES=10,this.MAX_VERTEX=10,this.mouseEnabled=!1,noise.seed(0),this.vertexArr=[];for(var e=0;e<this.MAX_LINES;e++){this.vertexArr[e]=[];for(var i=(this.MAX_VERTEX-1)*Math.random()*Math.random()+1,a=0;i>=a;a++)this.vertexArr[e][a]=0}this.on("tick",this.handleTick,this)}return __extends(e,t),e.prototype.handleTick=function(){this.time=Date.now()/5e3,this.graphics.clear();for(var t=0;t<this.MAX_LINES;t++)this.drawWave(this.vertexArr[t],.05*t+.001,.1*t)},e.prototype.drawWave=function(t,e,i){var a=t.length-1,r=wrap_w,s=wrap_h;this.graphics.setStrokeStyle(e).beginStroke("white");for(var n=0;a>=n;n++){var o=noise.perlin2(.2*n,this.time+i);o*=.5,t[n]=o*wrap_h*2}var h=s/2,c=[];c.push({x:-200,y:h});for(var n=0;a>=n;n++)c.push({x:r*(n/a)>>0,y:t[n]+h});c.push({x:r+200,y:h});for(var n=0;n<c.length;n++)if(n>=2){var l=c[n-0].x,p=c[n-0].y,d=c[n-1].x,u=c[n-1].y,v=c[n-2].x,g=c[n-2].y,f=(v+d)/2,_=(g+u)/2,m=(l+d)/2,w=(p+u)/2;this.graphics.moveTo(f,_).curveTo(d,u,m,w)}this.graphics.endStroke()},e}(createjs.Shape);t.CrossGraphicsContainer=e}(project||(project={}));var project;!function(t){"use strict";var e=function(t){function e(){t.call(this)}return __extends(e,t),e.prototype.drawContents=function(t,e){this.graphics.clear(),this.graphics.beginFill(createjs.Graphics.getHSL(0,0,0)).drawRect(0,0,t,e);var i=1*t/3+t/10*Math.sin(Date.now()/4e3),a=1*e/3,r=t/2;this.graphics.beginRadialGradientFill([createjs.Graphics.getHSL(0,0,100,.3+.008*Math.random()),createjs.Graphics.getHSL(0,0,0,0)],[0,1],i,a,0,i,a,r),this.graphics.drawCircle(i,a,r),this.graphics.endFill();var i=3*t/4+t/15*Math.cos(Date.now()/1e4),a=2*e/3,r=t/3;this.graphics.beginRadialGradientFill([createjs.Graphics.getHSL(0,0,100,.3+.006*Math.random()),createjs.Graphics.getHSL(0,0,0,0)],[0,1],i,a,0,i,a,r),this.graphics.drawCircle(i,a,r),this.graphics.endFill()},e}(createjs.Shape);t.SpotLightContainer=e}(project||(project={}));var project;!function(t){"use strict";var e=function(t){function e(e){t.call(this),this._time=0,this._isMouseMoved=!1,this._tickCount=0,this._bg=new createjs.Shape,this.addChild(this._bg),this._emitter=new a(e,2,2),this.addChild(this._emitter.container),this._emitterForMouse=new a(2,6,6),this.addChild(this._emitterForMouse.container),this.on("tick",this.enterFrameHandler,this)}return __extends(e,t),Object.defineProperty(e.prototype,"isMouseMoved",{set:function(){this._isMouseMoved=!0},enumerable:!0,configurable:!0}),e.prototype.enterFrameHandler=function(){if(this._tickCount=this._tickCount+1,this._tickCount%2==0&&this._emitter.emit(wrap_w*Math.random(),wrap_h/5*(Math.random()-.5)+6*wrap_h/10),this._emitter.update(),1==this._isMouseMoved){var t=this.globalToLocal(this.getStage().mouseX,this.getStage().mouseY);this._emitterForMouse.emit(t.x,t.y),this._isMouseMoved=!1}this._emitterForMouse.update();var e=45*Math.sin(-1*Date.now()/400*Math.PI/180)+200,i=createjs.Graphics.getHSL(e,100,60),a=createjs.Graphics.getHSL(e+120,100,40);this._bg.graphics.clear().beginLinearGradientFill([i,a],[0,1],0,0,0,wrap_h).drawRect(0,0,wrap_w,wrap_h)},e}(createjs.Container);t.ParticleContainer=e;var i=function(){function t(){this.vy=0,this.x=0,this.latestY=0,this.latestX=0,this.y=0,this.vx=0}return t.prototype.update=function(){var t=this.latestX-this.x,e=this.latestY-this.y,i=.2*Math.sqrt(t*t+e*e),a=Math.atan2(e,t);this.vx+=Math.cos(a)*i,this.vy+=Math.sin(a)*i,this.vx*=.4,this.vy*=.4,this.x+=this.vx,this.y+=this.vy},t}(),a=function(t){function e(e,i,a){t.call(this),this.numParticles=e,this.startVx=i,this.startVy=a,this.PRE_CACHE_PARTICLES=100,this.container=new createjs.Container,this._particleActive=[],this._particlePool=[];for(var s=0;s<this.PRE_CACHE_PARTICLES;s++)this._particlePool.push(new r)}return __extends(e,t),e.prototype.emit=function(t,e){for(var i=0;i<this.numParticles;i++)this.getNewParticle(t,e)},e.prototype.update=function(){t.prototype.update.call(this);for(var e=0;e<this._particleActive.length;e++){var i=this._particleActive[e];i.getIsDead()?this.removeParticle(i):i.update()}},e.prototype.getNewParticle=function(t,e){var i=this.fromPool();return i.resetParameters(t,e,this.startVx,this.startVy),this._particleActive.push(i),this.container.addChild(i),i},e.prototype.removeParticle=function(t){this.container.removeChild(t);var e=this._particleActive.indexOf(t);e>-1&&this._particleActive.splice(e,1),this.toPool(t)},e.prototype.getActiveParticles=function(){return this._particleActive},e.prototype.fromPool=function(){return this._particlePool.length>0?this._particlePool.shift():new r},e.prototype.toPool=function(t){this._particlePool.push(t)},e}(i),r=function(t){function e(){t.call(this),this.MAX_SIZE=128;var e=Math.random()*Math.random()*Math.random()*Math.random()*this.MAX_SIZE+2;this.size=e;var i=createjs.Graphics.getHSL(0,0,20+50*Math.random());this.graphics.clear(),Math.random()<.4?this.graphics.beginRadialGradientFill([i,"#000000"],[0,1],0,0,0,0,0,this.size):Math.random()<.1?this.graphics.setStrokeStyle(1).beginStroke(createjs.Graphics.getRGB(255,255,255)):Math.random()<.3?this.graphics.setStrokeStyle(1.5).beginStroke(createjs.Graphics.getRGB(255,255,255)):this.graphics.beginFill(i),this.graphics.drawCircle(0,0,this.size),this.graphics.endFill(),this.compositeOperation="lighter",this.mouseEnabled=!1;var a=2;this.cache(-this.size-a,-this.size-a,2*this.size+2*a,2*this.size+2*a),this._destroy=!0}return __extends(e,t),e.prototype.resetParameters=function(t,e,i,a){this.x=t,this.y=e,this.vx=(Math.random()-.5)*i,this.vy=(Math.random()-.5)*a,this.life=Math.random()*Math.random()*400+40,this.vSize=.5*Math.random(),this.baseAlpha=.7,this._destroy=!1,this._count=0,this.alpha=1,this.scaleX=this.scaleY=1},e.prototype.update=function(){this.vy-=.05,this.vx*=.98,this.vy*=.98,this.x+=this.vx,this.y+=this.vy,this._count++;var t=1-this._count/this.life,e=1-this._count/this.life*this.vSize;this.alpha=.3*Math.random()+this.baseAlpha*t,this.scaleX=this.scaleY=e,this.life<this._count&&(this._destroy=!0,this.parent.removeChild(this))},e.prototype.getIsDead=function(){return this._destroy},e}(createjs.Shape)}(project||(project={}));var project;!function(t){"use strict";var e=function(){function e(e){var i=this;this.stageBase=new createjs.Stage("canvasBase");var a=new t.ParticleContainer(e);this.stageBase.addChild(a),createjs.Ticker.setFPS(60),createjs.Ticker.timingMode=createjs.Ticker.RAF,createjs.Ticker.on("tick",this.handleTick,this);var r=new createjs.Stage("canvasOverlay");this.stageOverlay=r,this.stageOverlay.nextStage=this.stageBase,this.stageBase.on("stagemousemove",function(){a.isMouseMoved=!0}),this.spotLightContainer=new t.SpotLightContainer,r.addChild(this.spotLightContainer),this.stageCalcInside=new createjs.Stage(document.createElement("canvas")),this.stageCalcInside.autoClear=!1;var s=new t.CrossGraphicsContainer;this.stageCalcInside.addChild(s),this.buildUi(),this.handleResize(),window.addEventListener("resize",function(){i.handleResize()}),setTimeout(function(){i.handleResize()},100)}return e.prototype.buildUi=function(){},e.prototype.handleTick=function(){this.spotLightContainer.drawContents(innerWidth,wrap_h),this.stageBase.update();var t=this.stageCalcInside.canvas.getContext("2d");t.fillStyle="rgba(0, 0, 0, "+.35*Math.random()+")",t.fillRect(0,0,this.stageCalcInside.canvas.width,this.stageCalcInside.canvas.height),this.stageCalcInside.update(),this.stageOverlay.update();var e=this.stageOverlay.canvas.getContext("2d");e.globalCompositeOperation="lighter",e.drawImage(this.stageCalcInside.canvas,0,0)},e.prototype.handleResize=function(){clockmaker.StageHelper.highDPI(this.stageBase,innerWidth,wrap_h),clockmaker.StageHelper.highDPI(this.stageOverlay,innerWidth,wrap_h),clockmaker.StageHelper.highDPI(this.stageCalcInside,innerWidth,wrap_h)},e}();t.MainBase=e}(project||(project={}));var project;!function(t){"use strict";var e=1;window.addEventListener("DOMContentLoaded",function(){new t.Main(e);var i=document.getElementById("mainTitle");null!=i&&requestAnimationFrame(function(){i.classList.add("show")})});var i=function(t){function e(e){t.call(this,e),this.buildUi()}return __extends(e,t),e.prototype.buildUi=function(){},e.prototype.handleResize=function(){t.prototype.handleResize.call(this)},e}(t.MainBase);t.Main=i}(project||(project={}));</script>

        </div>
        <div class="content">
            <h2>写在前面</h2>
            <p>js 模版引擎，一搜一大堆了，但自己一个都没用过，然后又重新写一个是不是很无聊了。</p>
            <p>其实写这个模版引擎有一定原因的，主要是需要结合另一个fis3 npm 组件结合使用。fis3 npm 那个项目主要是将jsp中的一些模块封装成js 函数，这些函数输出的是一些模版字符串。然而这个项目主要是将这些字符串与数据结合，从而转换为我们需要的html</p>
            <h4>为啥一直不用js的模版引擎</h4>
            <p>主要懒懒懒，还有些其他原因</p>
            <p>js模版引擎只能事先将模版字符串写在页面中，而且语法各异。如果使用传统的办法jquery读取一个隐藏的html 然后挨个挨个赋值，这样相比模版引擎，反而更容易控制，好维护。</p>
            <p>模版引擎的语法和html的差别也比较大。改东西比较麻烦，不太灵活（因人而异，熟悉后就会很顺手）</p>
            <h4>模版背景</h4>
            <p>抛开传统的业务场景，还有一种场景是这么久以来一直都觉得很玛法的地方</p>
            <p>自己写一些插件，这些插件需要生成一些html。自己希望插件尽可能的简单，所以html会以字符串的形式出现在js中，虽然以前写过一些解析zen语法的js，但也只是将抒写html变得更简便，实质上还是在js中写这些字符串。</p>
            <p>当插件需要改版或者添加功能，维护起来就非常麻烦。这时候需要一个将html文件转换为js字符串工具，这工具是接下来要写的一个fis3-npm插件。这样，那些需要输出的html字符串 就可以写在html文件中，单独为一个模块，然后通过插件转换为js的一个函数，这函数输出就是一个html字符串,然后通过jquery append到页面中就行了</p>
            <p>大部分情况，这些输出的字符串，都不是纯静态的，都是动态需要添加数据之类的，所以html部分只能写成模版语法，然后输出的是模版字符串。</p>
            <p>有了这个思路继续往下，模版字符串怎么写完全取决于所用的模版引擎的规则。</p>
            <p>虽然用市面上的模版引擎也可以，但是业务中用jsp taglib 语法用的比较熟，如果这个模版引擎和jsp语法一样，并且可以无缝替换，那这样岂不是更好。</p>
            <p>这个模版引擎就这么诞生了</p>
            <h2>支持规则</h2>
            <p>第一版先支持比较简单的taglib 语法，基本上能满足覆盖95%以上的业务需求</p>
            <ul>
                <li>
                    <p>变量输出</p>
                    <p>${value}</p>
                    <pre><code class="language javascript">
        &lt;script type="text/template" id="t1">
            &lt;p>你的名字:${name}&lt;/p>
        &lt;/script>
        &lt;script type="text/javascript">
        var str = document.getElementById('t1').innerHTML;
        var data = {name: "皮皮虾"}
        var tp1 = new jsptpl(str);
        var outstr = tp1.render(data);
        console.log(outstr.trim()); //   &lt;p>你的名字:皮皮虾&lt;/p>
        &lt;/script>
</code></pre>
                    <p>下面例子就只例举模板和数据和输出，这样比较省篇幅</p>
                </li>
                <li>
                    <p>条件判断输出</p>
                    <p>&lt;c:if test="${value=='xxx'}">文本内容&lt;/c:if></p>
                    <pre><code class="language html">
        // 只例举关键步骤，详细运行参照第一个完整例子
        &lt;!---html 模板字符--->
        &lt;p>性别：&lt;c:if test="${sex=='boy'}">男&lt;/c:if>&lt;c:if test="${sex=='girl'}">女&lt;/c:if>&lt;/p>
        &lt;p>其他属性：&lt;c:if test="${sex=='boy'&&xianrou&&a2>3}">小鲜肉&lt;/c:if>&lt;/p>
        &lt;!--js data-->
        var data = {sex "boy",xianrou:true,a2: 4}
        &lt;!--js 字符串输出-->
        &lt;p>性别：男&lt;/p>
        &lt;p>其他属性：小鲜肉&lt;/p>
</code></pre>
                    <p> 这个版本暂时支持 ==，>=,<=,>,< 等运算符，不支持括号运算（懒得写了），基本上满足要求了</p>
                </li>
                <li>
                    <p>循环输出</p>
                    <p>&lt;c:forEach items="${A}" var="item">${item.key}</c:forEach></p>
                    <pre><code class="language html">
        // 只例举关键步骤，详细运行参照第一个完整例子
        &lt;!---html 模板字符--->
        &lt;ul>
            &lt;c:forEach items="${friends}" var="item">
                &lt;li>他的名字:${item.name},今年${item.age}岁,爱好：&lt;c:forEach items="${item.hobby}" var="hobby">${hobby} &lt;/li>
            &lt;/c:forEach>
        &lt;/ul>
        &lt;!--js data-->
        var data = {
                        friends: [
                            {name: "大龙虾", age: 6, hobby: ["吃饭", "睡觉", "打豆豆"]},
                            {name: "小龙虾", age: 2, hobby: ["吃饭2", "睡觉2", "打豆豆2"]}
                        ]
                   }
        &lt;!--js 字符串输出-->
        &lt;ul>
            &lt;li>
                他的名字:大龙虾,今年6岁,爱好：吃饭 睡觉 打豆豆
            &lt;/li>
            &lt;li>
                他的名字:小龙虾,今年2岁,爱好：吃饭2 睡觉2 打豆豆2
            &lt;/li>
        &lt;/ul>
</code></pre>
                    <p> 注：循环输出支持多层遍历循环解析输出数据。</p>
                </li>
            </ul>
        </div>

        <!--<script type="text/javascript" src="../../js/zlib/jsptpl.min.js"></script>-->
        <script type="text/javascript" src="http://jsptpl.nln.me/dist/jsptpl.js"></script>
        <script type="text/template" id="t1">
            <p>我的名字:${name}，</p>
            <p>性别：<c:if test="${sex=='boy'}">男</c:if></p>
            <p>其他属性：<c:if test="${sex=='boy'&&xianrou&&a2>3}">小鲜肉</c:if></p>
            <p>条件判断：<c:if test="${a1>2}">符合条件</c:if></p>
            <p>我的朋友们</p>
            <ul>
                <c:forEach items="${friends}" var="item">
                    <li>他的名字:${item.name},今年${item.age}岁</li>
                </c:forEach>
            </ul>
        </script>
        <script type="text/javascript">
var x = /^[\d]+$|(?=(['"]).*?\1|true|false)/g;
console.log(x.test("b1"), "尼玛bbb");
var str = "asdf>444";
var reg4 = /(.*?)(==|>=|<=|>|<)(.*)/g;

str.replace(reg4, function (_, $1, $2, $3) {
//                console.log(_, $1, $2, $3, "nnn")
})
//            console.log(str.match(reg4), "mmm");
var str = document.getElementById('t1').innerHTML;
var data = {
    name: "皮皮虾",
    sex: "boy",
    xianrou: true,
    a1: 3,
    a2: 4,
    friends: [
        {name: "大龙虾", age: 6, hobby: ["吃饭", "睡觉", "打豆豆"]},
        {name: "小龙虾", age: 2, hobby: ["吃饭2", "睡觉2", "打豆豆2"]}
    ],
    hobby: ["吃饭", "睡觉", "打豆豆"]
};
var tp1 = new jsptpl(str);
var outstr = tp1.render(data);
console.log(outstr.trim()); //   <p>你的名字:皮皮虾</p>
        </script>
    </body>
</html>

<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html class="gblog">
    <head>
        <title>linux 文件命令手册</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="import" href="../weight/cssjslink.html?__inline">
    </head>
    <body>

        <link rel="import" href="../weight/header.html?__inline">
        <div  class="banner">
            <link rel="import" href="../weight/b-inner.html?__inline">
        </div>
        <div class="main">
            <h1>grep 速查</h1>
            <p>语法：grep [OPTIONS] PATTERN [FILE...]</p>
            <p>详细语法： grep [-abcEFGhHilLnqrsvVwxy][-A<显示列数>][-B<显示列数>][-C<显示列数>][-d<进行动作>][-e<范本样式>][-f<范本文件>][--help][范本样式][文件或目录...]</p>
            <div class="zwrap">
                <div class="title">OPTIONS</div>
                <div class="content">
                    <ul>
                        <li><code>-a</code> 不要忽略二进制数据。</li>
                        <li><code>-A</code> <显示列数> 除了显示符合范本样式的那一行之外，并显示该行之后的内容。</li>
                        <li><code>-b</code> 在显示符合范本样式的那一行之外，并显示该行之前的内容。</li>
                        <li><code>-c</code> 计算符合范本样式的列数。</li>
                        <li><code>-C</code> <显示列数>或-<显示列数> 除了显示符合范本样式的那一列之外，并显示该列之前后的内容。</li>
                        <li><code>-d</code> <进行动作> 当指定要查找的是目录而非文件时，必须使用这项参数，否则grep命令将回报信息并停止动作。</li>
                        <li><code>-e</code> <范本样式> 指定字符串作为查找文件内容的范本样式。</li>
                        <li><code>-E</code> 将范本样式为延伸的普通表示法来使用，意味着使用能使用扩展正则表达式。</li>
                        <li><code>-f</code> <范本文件> 指定范本文件，其内容有一个或多个范本样式，让grep查找符合范本条件的文件内容，格式为每一列的范本样式。</li>
                        <li><code>-F</code> 将范本样式视为固定字符串的列表。</li>
                        <li><code>-G</code> 将范本样式视为普通的表示法来使用。</li>
                        <li><code>-h</code> 在显示符合范本样式的那一列之前，不标示该列所属的文件名称。</li>
                        <li><code>-H </code>在显示符合范本样式的那一列之前，标示该列的文件名称。</li>
                        <li><code>-i</code> 忽略字符大小写的差别。</li>
                        <li><code>-l</code> 列出文件内容符合指定的范本样式的文件名称。</li>
                        <li><code>-L</code> 列出文件内容不符合指定的范本样式的文件名称。</li>
                        <li><code>-n</code> 在显示符合范本样式的那一列之前，标示出该列的编号。</li>
                        <li><code>-q</code> 不显示任何信息。</li>
                        <li><code>-R/-r </code> 此参数的效果和指定 <code>-d recurse</code> 参数相同。</li>
                        <li><code>-s</code> 不显示错误信息。</li>
                        <li><code>-v</code> 反转查找。</li>
                        <li><code>-w </code>只显示全字符合的列。</li>
                        <li><code>-x</code> 只显示全列符合的列。</li>
                        <li><code>-x</code> 只显示全列符合的列。</li>
                        <li><code>-y</code> 此参数效果跟“-i”相同。</li>
                        <li><code>-y</code> 此参数效果跟“-i”相同。</li>
                    </ul>
                </div>
            </div>
            <div class="zwrap">
                <div class="title">正则规则</div>
                <div class="content">
                    <ul>
                        <li><code>.</code>任意单个字符，指的就是一个点代表1个字符。这个字符不特殊指分，符号也行</li>
                        <li><code>[]</code>指定范围内的任意单个字符。这个括号中指定的字符都能匹配出来，匹配范围广。</li>
                        <li><code>[^]</code>指定范围外的任意单个字符，和上面[]这个想法。取反。通俗的意思就是括号中所指定的字符，就匹配不到了。</li>
                        <li><code>*</code>任意次，意为匹配的字符中，有任意个字符都行。</li>
                        <li><code>\?</code>匹配其前面的字符0次或1次；"a\?b"指的就是a后面到b中间可以有一个字符或者什么都没有。</li>
                        <li><code>^</code>用于锚定行首</li>
                        <li><code>$</code>用于锚定行尾</li>
                        <li><code>^$</code>锚定空白行</li>
                    </ul>
                </div>
            </div>
            <h2>据一些例子</h2>
            <ul>
                <li>
                    <div class="zwrap">
                        <div class="title">普通用法</div>
                        <div class="content">
                            <ul>
                                <li> <code>grep -c "text" filename</code>  统计文件中包含 <code>text</code> 的次数</li>
                                <li> <code>grep -n -A3 -B2 --color=auto 'haha'</code>  查找关键字 <code>haha</code> 所在行的前两行与后三行,一起显示出来</li>
                            </ul>
                        </div>
                    </div>
                </li>
                <li>
                    <div class="zwrap">
                        <div class="title">递归查找</div>
                        <div class="content">
                            <ul>
                                <li> <code>grep 'nergywise' .</code> 在当前目录搜索带'energywise'行的文件</li>
                                <li> <code>grep -r 'energywise' .</code> 在当前目录及其子目录下搜索'energywise'行的文件</li>
                                <li> <code>grep -l -r 'energywise' .</code>在当前目录及其子目录下搜索'energywise'行的文件，但是不显示匹配的行，只显示匹配的文件</li>
                            </ul>

                        </div>
                    </div>
                </li>
                <li>
                    <div class="zwrap">
                        <div class="title">正则</div>
                        <div class="content">
                            <ul>
                                <li> <code>grep -n 't[ae]st' regular_express.txt</code> 搜寻 test 或 taste 这两个单词</li>
                                <li> <code>grep -n '[0-9][0-9]*' regular_express.txt</code> 找出『任意数字』的行</li>
                                <li> <code>grep -n 'go\{2,5\}g' regular_express.txt</code>找出 g 后面接 2 到 5 个 o （ { 与 } 的符号在 shell 是有特殊意义的，因此， 我们必须要使用字符   \ 来让他失去特殊意义才行）</li>
                            </ul>
                        </div>
                    </div>
                </li>
                <li>
                    综合应用：将日志中的所有带where条件的sql查找查找出来:
                    <p><code>cat LOG.* | tr a-z A-Z | grep "FROM " | grep "WHERE" > b</code></p>
                </li>
            </ul>
        </div>
    </body>
</html>
